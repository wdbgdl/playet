import{H as me,a6 as W,a7 as oe,O as ye,r as n,a8 as be,a0 as L,a9 as pe,aa as Se,ab as ke,e as _,ac as se,ad as ne,ae as De,af as we,ag as $e,ah as Be,ai as xe,Y as Ce,_ as ue,q as te,u as de,Z as ve,y as fe,aj as Ve,b as he,$ as Ie,o as N,c as F,d as s,w as re,F as ae,g as Te,h as Ee,t as ie,v as ce,a1 as M,D as Pe,f as b,a2 as Ne,B as ee,z,a5 as O,s as ze,U as Fe,i as Ae,S as Me,p as _e,l as ge}from"./index-046c05c3.js";import{_ as Re}from"./SelectionPopup-3d069b35.js";import"./refill-dddcad67.js";const[Oe,q]=me("slider"),qe={min:W(0),max:W(100),step:W(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:oe,buttonSize:oe,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var Le=ye({name:Oe,props:qe,emits:["change","dragEnd","dragStart","update:modelValue"],setup(a,{emit:v,slots:p}){let o,f,D;const I=n(),T=[n(),n()],i=n(),g=be(),C=L(()=>Number(a.max)-Number(a.min)),R=L(()=>{const e=a.vertical?"width":"height";return{background:a.inactiveColor,[e]:pe(a.barHeight)}}),B=e=>a.range&&Array.isArray(e),w=()=>{const{modelValue:e,min:l}=a;return B(e)?`${(e[1]-e[0])*100/C.value}%`:`${(e-Number(l))*100/C.value}%`},Y=()=>{const{modelValue:e,min:l}=a;return B(e)?`${(e[0]-Number(l))*100/C.value}%`:"0%"},X=L(()=>{const l={[a.vertical?"height":"width"]:w(),background:a.activeColor};i.value&&(l.transition="none");const r=()=>a.vertical?a.reverse?"bottom":"top":a.reverse?"right":"left";return l[r()]=Y(),l}),A=e=>{const l=+a.min,r=+a.max,d=+a.step;e=xe(e,l,r);const c=Math.round((e-l)/d)*d;return $e(l,c)},m=()=>{const e=a.modelValue;B(e)?D=e.map(A):D=A(e)},H=e=>{var l,r;const d=(l=e[0])!=null?l:Number(a.min),c=(r=e[1])!=null?r:Number(a.max);return d>c?[c,d]:[d,c]},u=(e,l)=>{B(e)?e=H(e).map(A):e=A(e),se(e,a.modelValue)||v("update:modelValue",e),l&&!se(e,D)&&v("change",e)},J=e=>{if(e.stopPropagation(),a.disabled||a.readonly)return;m();const{min:l,reverse:r,vertical:d,modelValue:c}=a,k=ne(I),t=()=>d?r?k.bottom-e.clientY:e.clientY-k.top:r?k.right-e.clientX:e.clientX-k.left,h=d?k.height:k.width,x=Number(l)+t()/h*C.value;if(B(c)){const[$,Q]=c,G=($+Q)/2;x<=G?u([x,Q],!0):u([$,x],!0)}else u(x,!0)},S=e=>{a.disabled||a.readonly||(g.start(e),f=a.modelValue,m(),i.value="start")},K=e=>{if(a.disabled||a.readonly)return;i.value==="start"&&v("dragStart",e),De(e,!0),g.move(e),i.value="dragging";const l=ne(I),r=a.vertical?g.deltaY.value:g.deltaX.value,d=a.vertical?l.height:l.width;let c=r/d*C.value;if(a.reverse&&(c=-c),B(D)){const k=a.reverse?1-o:o;f[k]=D[k]+c}else f=D+c;u(f)},j=e=>{a.disabled||a.readonly||(i.value==="dragging"&&(u(f,!0),v("dragEnd",e)),i.value="")},Z=e=>typeof e=="number"?q("button-wrapper",["left","right"][e]):q("button-wrapper",a.reverse?"left":"right"),U=(e,l)=>{const r=i.value==="dragging";if(typeof l=="number"){const d=p[l===0?"left-button":"right-button"];let c;if(r&&Array.isArray(f)&&(c=f[0]>f[1]?o^1:o),d)return d({value:e,dragging:r,dragIndex:c})}return p.button?p.button({value:e,dragging:r}):_("div",{class:q("button"),style:Be(a.buttonSize)},null)},E=e=>{const l=typeof e=="number"?a.modelValue[e]:a.modelValue;return _("div",{ref:T[e??0],role:"slider",class:Z(e),tabindex:a.disabled?void 0:0,"aria-valuemin":a.min,"aria-valuenow":l,"aria-valuemax":a.max,"aria-disabled":a.disabled||void 0,"aria-readonly":a.readonly||void 0,"aria-orientation":a.vertical?"vertical":"horizontal",onTouchstartPassive:r=>{typeof e=="number"&&(o=e),S(r)},onTouchend:j,onTouchcancel:j,onClick:we},[U(l,e)])};return u(a.modelValue),Se(()=>a.modelValue),T.forEach(e=>{ke("touchmove",K,{target:e})}),()=>_("div",{ref:I,style:R.value,class:q({vertical:a.vertical,disabled:a.disabled}),onClick:J},[_("div",{class:q("bar"),style:X.value},[a.range?[E(0),E(1)]:E()])])}});const Ye=Ce(Le);const Xe=a=>(_e("data-v-10b5af0a"),a=a(),ge(),a),He={class:"video_series_comp"},je=["onClick","src"],Ue={class:"progress-bar"},Qe={class:"bar-box"},Je=["onClick"],Ke={key:1,class:"right-info"},Ze=["onClick"],Ge=Xe(()=>s("p",null,"Anthology",-1)),We={key:2,class:"video-text"},ea={class:"title"},aa={class:"bottom_anthology"},ta=["onClick"],la={class:"bottom_anthology_left_select"},oa=["onClick"],sa={__name:"videoSeriesSwitch",props:{playsData:{type:Object,required:!0},workFlag:{type:Boolean,default:!1},type:{type:String,default:"switchPlay"}},emits:["goLink"],setup(a,{emit:v}){let p=n(!1),o=n(!1),f=n(-1),D=n(!1),I=n(!1),T=n(0),i=n({}),g=n(40),C=n(!0),R=n(1),B=n(!1),w=n(1),Y=n(0),X=n(0),A=n(50),{proxy:m}=te(),H=de(),u=ve(),{playDetailById:J}=fe(u);Ve(()=>{m.$refs.videos[w.value-1].removeEventListener("timeupdate",{})}),he(()=>{E(),i.value=J.value.find(t=>t.playet_id==H.currentRoute.value.query.id),setTimeout(()=>{const t=m.$refs.videos[w.value-1];t.addEventListener("timeupdate",()=>{const h=Math.ceil(t.currentTime)/Math.ceil(t.duration);g.value=h*100})},300)});let S=a;Ie(()=>w.value,t=>{console.log(t,"newValue"),m.$refs.swipeRef.swipeTo(t-1)},{deep:!0});const K=t=>{E(),w.value=t},j=()=>{o.value=!0,C.value=!1,R.value=5,m.$refs.videos[w.value-1].pause()},Z=()=>{R.value=1,o.value=!1,C.value=!0;const t=m.$refs.videos[w.value-1];t.currentTime=Math.ceil(t.duration)*(g.value/100),m.$refs.videos[w.value-1].play()};L(()=>localStorage.getItem("Qy")!==null),L(()=>{let t=[];return u.playsData.videos.forEach((h,x)=>{x==T.value&&h.chat.forEach($=>t.push($))}),t});function U(t){if(I.value===!0||D.value===!0)I.value=!1,D.value=!1;else{let h=null;clearTimeout(h),p.value=!p.value,h=setTimeout(()=>{p.value===!0?o.value===!0?(m.$refs.videos[t].play(),o.value=!1):(m.$refs.videos[t].pause(),o.value=!0):(o.value=!1,S.playsData.videos[T.value].likeFlag===!1&&(O({icon:"like",message:"已点赞"}),u.$patch(()=>{S.playsData.videos[T.value].likeFlag=!0}))),p.value=!1},300)}}const E=()=>{B.value=!B.value},e=t=>{E(),w.value=t+1};function l(t){Y.value=t.touches[0].clientX,X.value=t.touches[0].clientY}function r(t){let h=t.changedTouches[0].clientX-Y.value,x=t.changedTouches[0].clientY-X.value;Math.abs(h)>A.value&&Math.abs(h)>Math.abs(x)&&(h>=0?(console.log("右滑"),o.value=!1,u.playsData.navIndex!==0?u.$patch(()=>{u.playsData.navIndex--}):O("前面没有咯~")):(console.log("左滑"),o.value=!1,u.playsData.navIndex!==3?u.playsData.navIndex++:H.push({path:"/authorHome",query:{dataObj:JSON.stringify(S.playsData)}})))}function d(t){m.$refs.videos[t.index].pause(),o.value=!1}function c(t){if(console.log(t,i.value.seriesList[t.index].is_lock),i.value.seriesList[t.index].is_lock)return m.$refs.videos[t.index].pause(),ze("请支付");m.$refs.videos[t.index].play(),f.value=t.index}function k(t){o.value=!1,localStorage.getItem("Qy")!==null?S.playsData.videos[t].collectionFlag?(u.$patch(()=>{S.playsData.videos[t].collectionFlag=!1,S.playsData.videos[t].collTotal--}),O("已取消")):(u.$patch(()=>{S.playsData.videos[t].collectionFlag=!0,S.playsData.videos[t].collTotal++}),O("已收藏")):O("登录后才可以收藏哦~")}return(t,h)=>{const x=Ye,$=Fe,Q=Ae,G=Me;return N(),F(ae,null,[s("div",He,[_(G,{ref:"swipeRef","initial-swipe":0,onDragEnd:c,onDragStart:d,"show-indicators":!1,style:{height:"100vh"},vertical:"","lazy-render":!0},{default:re(()=>{var le;return[(N(!0),F(ae,null,Te((le=b(i))==null?void 0:le.seriesList,(y,P)=>(N(),Ee(Q,{key:P},{default:re(()=>[s("div",{class:"videos",onTouchstart:l,onTouchend:r},[ie(s("video",{onClick:M(V=>U(P),["stop"]),muted:!0,preload:"metadata",ref_for:!0,ref:"videos",id:"videos",class:Pe(y.sizeFlag?"videosize"+(y==null?void 0:y.which_episode):"videos"+(y==null?void 0:y.which_episode)),src:y.episode_url,loop:"",autoplay:""}," 当前设备不支持该视频播放 ",10,je),[[ce,y.imgFlag!==!0]])],32),s("div",Ue,[s("div",Qe,[_(x,{modelValue:b(g),"onUpdate:modelValue":h[0]||(h[0]=V=>Ne(g)?g.value=V:g=V),"bar-height":b(R)+"px","active-color":"#ee0a24",onDragStart:j,onDragEnd:Z},null,8,["modelValue","bar-height"])])]),b(o)?(N(),F("div",{key:0,onClick:V=>U(P),class:"conPlay"},[_($,{name:"play",color:"#fff",size:"50"})],8,Je)):ee("",!0),b(S).type==="switchPlay"?(N(),F("div",Ke,[s("div",null,[_($,{onClick:M(V=>k(P),["stop"]),name:"star",size:"30",color:"#fff"},null,8,["onClick"]),s("p",null,z(y.playet_star),1)]),s("div",{onClick:M(V=>e(P),["stop"]),class:"seleted"},[_($,{size:"30",name:"video-o",color:"#fff"}),Ge],8,Ze)])):ee("",!0),b(S).type==="switchPlay"?(N(),F("div",We,[s("div",ea,[s("h4",null,z(y.playet_name),1)]),s("p",null,z(y.playet_name),1)])):ee("",!0),ie(s("div",aa,[s("div",{class:"bottom_anthology_left",onClick:M(V=>e(P),["stop"])},[s("div",la,[_($,{size:"20",name:"video-o",color:"#fff"}),s("span",null,z(y.which_episode)+"/"+z(b(i).palyet_all_series),1)]),_($,{name:"arrow-up"})],8,ta),s("div",{onClick:M(V=>e(P),["stop"]),class:"bottom_anthology_right"},[_($,{onClick:M(V=>k(P),["stop"]),name:"star",size:"20",color:"#fff"},null,8,["onClick"]),s("p",null,z(b(i).playet_star),1)],8,oa)],512),[[ce,b(C)]])]),_:2},1024))),128))]}),_:1},512)]),_(Re,{currentPlayData:b(i),visible:b(B),currentsubEpsId:b(w),onToggleOverlay:E,onSelectSeries:K},null,8,["currentPlayData","visible","currentsubEpsId"])],64)}}},na=ue(sa,[["__scopeId","data-v-10b5af0a"]]);const ra=a=>(_e("data-v-37791a07"),a=a(),ge(),a),ia=ra(()=>s("span",{class:"iconfont icon-back"},null,-1)),ca={class:"name"},ua={__name:"BackBar",props:{goBackData:Object},setup(a){const{proxy:v}=te(),p=()=>{(v.goBackData.goBackParam==""||v.goBackData==null)&&v.$router.go(-1),v.goBackData.scroll&&v.$router.push({path:"/home",query:{scroll:v.goBackData.isScroll}})};return(o,f)=>(N(),F("div",{class:"go_back_bar",onClick:p},[ia,s("span",ca,"return to "+z(a.goBackData.title),1)]))}},da=ue(ua,[["__scopeId","data-v-37791a07"]]),_a={__name:"dramaSubset",setup(a){let{proxy:v}=te(),p=de(),o=ve();const f=n({goBackParam:"",isScroll:"",title:""});let{playsSubData:D,playDetailById:I}=fe(o);const T=()=>{v.$route.query.goScroll&&(f.value.isScroll=v.$route.query.isScroll)};return he(()=>{T();const i=I.value.find(g=>g.playet_id==p.currentRoute.value.query.id);f.value.title=i.playet_name}),(i,g)=>(N(),F(ae,null,[_(da,{goBackData:f.value},null,8,["goBackData"]),_(na,{playsData:b(D),type:"switchSeries"},null,8,["playsData"])],64))}};export{_a as default};
