import{_ as Z,r as t,u as ee,a0 as X,D as Y,d as ae,w as te,g as R,o as v,c as S,i as a,j as u,k as q,F as V,q as le,t as j,a1 as se,a2 as oe,a3 as g,N as ne,l as i,y as b,x as m,a7 as w,s as ie,L as ce,a8 as re,a9 as ue,z as de,A as pe,aa as ve}from"./index-a264a3fc.js";import{_ as _e}from"./SelectionPopup-facb0ecc.js";const fe=_=>(de("data-v-27228ee9"),_=_(),pe(),_),he={class:"video_series_comp"},ye=["onClick","src"],ge=["onClick"],me={key:1,class:"right-info"},Se=["onClick"],we=fe(()=>a("p",null,"Anthology",-1)),ke={key:2,class:"video-text"},De={class:"title"},xe={class:"bottom_anthology"},Ce=["onClick"],Ie={class:"bottom_anthology_left_select"},$e=["onClick"],be={__name:"videoSeriesSwitch",props:{playsData:{type:Object,required:!0},workFlag:{type:Boolean,default:!1},type:{type:String,default:"switchPlay"}},emits:["goLink"],setup(_,{emit:T}){let f=t(!1),l=t(!1),F=t(-1),z=t(!1),E=t(!1),x=t(0),d=t({}),C=t(!1),k=t(1),P=t(0),B=t(0),A=t(50),{proxy:h}=ve(),L=ee(),s=X(),{playDetailById:Q}=Y(s);ae(()=>{D(),d.value=Q.value.find(e=>e.playet_id==L.currentRoute.value.query.id)});let o=_;te(()=>k.value,e=>{console.log(e,"newValue"),h.$refs.swipeRef.swipeTo(e-1)},{deep:!0});const H=e=>{D(),k.value=e};R(()=>localStorage.getItem("Qy")!==null),R(()=>{let e=[];return s.playsData.videos.forEach((c,n)=>{n==x.value&&c.chat.forEach($=>e.push($))}),e});function O(e){if(E.value===!0||z.value===!0)E.value=!1,z.value=!1;else{let c=null;clearTimeout(c),f.value=!f.value,c=setTimeout(()=>{f.value===!0?l.value===!0?(h.$refs.videos[e].play(),l.value=!1):(h.$refs.videos[e].pause(),l.value=!0):(l.value=!1,o.playsData.videos[x.value].likeFlag===!1&&(w({icon:"like",message:"已点赞"}),s.$patch(()=>{o.playsData.videos[x.value].likeFlag=!0}))),f.value=!1},300)}}const D=()=>{C.value=!C.value},I=e=>{D(),k.value=e+1};function J(e){P.value=e.touches[0].clientX,B.value=e.touches[0].clientY}function G(e){let c=e.changedTouches[0].clientX-P.value,n=e.changedTouches[0].clientY-B.value;Math.abs(c)>A.value&&Math.abs(c)>Math.abs(n)&&(c>=0?(console.log("右滑"),l.value=!1,s.playsData.navIndex!==0?s.$patch(()=>{s.playsData.navIndex--}):w("前面没有咯~")):(console.log("左滑"),l.value=!1,s.playsData.navIndex!==3?s.playsData.navIndex++:L.push({path:"/authorHome",query:{dataObj:JSON.stringify(o.playsData)}})))}function K(e){h.$refs.videos[e.index].pause(),l.value=!1}function U(e){if(console.log(e,d.value.seriesList[e.index].is_lock),d.value.seriesList[e.index].is_lock)return h.$refs.videos[e.index].pause(),ie("请支付");h.$refs.videos[e.index].play(),F.value=e.index}function M(e){l.value=!1,localStorage.getItem("Qy")!==null?o.playsData.videos[e].collectionFlag?(s.$patch(()=>{o.playsData.videos[e].collectionFlag=!1,o.playsData.videos[e].collTotal--}),w("已取消")):(s.$patch(()=>{o.playsData.videos[e].collectionFlag=!0,o.playsData.videos[e].collTotal++}),w("已收藏")):w("登录后才可以收藏哦~")}return(e,c)=>{const n=ce,$=re,W=ue;return v(),S(V,null,[a("div",he,[u(W,{ref:"swipeRef","initial-swipe":0,onDragEnd:U,onDragStart:K,"show-indicators":!1,style:{height:"100vh"},vertical:"","lazy-render":!0},{default:q(()=>{var N;return[(v(!0),S(V,null,le((N=i(d))==null?void 0:N.seriesList,(p,r)=>(v(),j($,{key:r},{default:q(()=>[a("div",{class:"videos",onTouchstart:J,onTouchend:G},[se(a("video",{onClick:g(y=>O(r),["stop"]),muted:!0,preload:"metadata",ref_for:!0,ref:"videos",id:"videos",class:ne(p.sizeFlag?"videosize":"videos"),src:p.episode_url,loop:"",autoplay:""}," 当前设备不支持该视频播放 ",10,ye),[[oe,p.imgFlag!==!0]])],32),i(l)?(v(),S("div",{key:0,onClick:y=>O(r),class:"conPlay"},[u(n,{name:"play",color:"#fff",size:"50"})],8,ge)):b("",!0),i(o).type==="switchPlay"?(v(),S("div",me,[a("div",null,[u(n,{onClick:g(y=>M(r),["stop"]),name:"star",size:"30",color:"#fff"},null,8,["onClick"]),a("p",null,m(p.playet_star),1)]),a("div",{onClick:g(y=>I(r),["stop"]),class:"seleted"},[u(n,{size:"30",name:"video-o",color:"#fff"}),we],8,Se)])):b("",!0),i(o).type==="switchPlay"?(v(),S("div",ke,[a("div",De,[a("h4",null,m(p.playet_name),1)]),a("p",null,m(p.playet_name),1)])):b("",!0),a("div",xe,[a("div",{class:"bottom_anthology_left",onClick:g(y=>I(r),["stop"])},[a("div",Ie,[u(n,{size:"20",name:"video-o",color:"#fff"}),a("span",null,m(p.which_episode)+"/"+m(i(d).palyet_all_series),1)]),u(n,{name:"arrow-up"})],8,Ce),a("div",{onClick:g(y=>I(r),["stop"]),class:"bottom_anthology_right"},[u(n,{onClick:g(y=>M(r),["stop"]),name:"star",size:"20",color:"#fff"},null,8,["onClick"]),a("p",null,m(i(d).playet_star),1)],8,$e)])]),_:2},1024))),128))]}),_:1},512)]),u(_e,{currentPlayData:i(d),visible:i(C),currentsubEpsId:i(k),onToggleOverlay:D,onSelectSeries:H},null,8,["currentPlayData","visible","currentsubEpsId"])],64)}}},Te=Z(be,[["__scopeId","data-v-27228ee9"]]),Ee={__name:"dramaSubset",setup(_){let T=X(),{playsSubData:f}=Y(T);return(l,F)=>(v(),j(Te,{playsData:i(f),type:"switchSeries"},null,8,["playsData"]))}};export{Ee as default};
